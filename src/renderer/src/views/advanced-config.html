<template>
    <import from="../components/app-layout"></import>
    <import from="../components/nav-bar"></import>

    <app-layout title="Advanced Configuration">
        <div class="flex flex-col h-full space-y-4">
            <p class="text-gray-600">
                Review and edit configuration files for <strong>${productName}</strong> before compiling.
            </p>

            <!-- Tabs for multiple config files -->
            <div if.bind="configFiles.length > 1" class="flex border-b">
                <button repeat.for="cf of configFiles" click.trigger="activeFile = cf.name"
                    class="px-4 py-2 text-sm font-medium border-b-2 transition-colors
                           ${activeFile === cf.name ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}">
                    ${cf.name}
                </button>
            </div>

            <!-- Single file label (if only one) -->
            <h3 if.bind="configFiles.length === 1" class="font-semibold text-gray-800">${configFiles[0].name}</h3>

            <!-- Text editors -->
            <div repeat.for="cf of configFiles" show.bind="activeFile === cf.name || configFiles.length === 1"
                class="flex-1 min-h-0">
                <textarea value.bind="cf.content"
                    class="w-full h-full min-h-75 px-4 py-3 font-mono text-sm border rounded-lg bg-gray-50 resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </textarea>
            </div>

            <div if.bind="error" class="bg-red-50 border border-red-200 rounded-lg p-4">
                <p class="text-red-700">${error}</p>
            </div>
        </div>

        <nav-bar au-slot="footer" next-text="Compile and Load" back-action.bind="() => goBack()"
            next-action.bind="() => goNext()">
        </nav-bar>
    </app-layout>
</template>